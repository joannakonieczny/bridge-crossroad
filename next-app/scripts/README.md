# Translation Key Management Scripts

This directory contains scripts to help manage translation keys between your code and translation files.

## ğŸ“ Files

- `sync-translation-keys.js` - Main tool for comparing translation keys
- `compare-keys.js` - Simple comparison script
- `compare-translation-keys.js` - Basic comparison with fallback parsing
- `compare-translation-keys-enhanced.js` - Enhanced parsing version

## ğŸš€ Quick Start

```bash
# 1. Extract translation keys from your code
npm run i18n:extract

# 2. Compare keys and see what's missing
npm run i18n:compare

# 3. Add missing Polish translations to messages/pl.ts

# 4. Repeat until synchronized
```

## ğŸ“‹ Available Commands

### `npm run i18n:extract`

Scans your code for translation keys using i18next-parser and generates `generated-raports/locales/en/translation.json`.

### `npm run i18n:compare`

Shows a summary of missing translation keys.

### `npm run i18n:compare:full`

Shows complete lists of all missing keys.

### `npm run i18n:compare:save`

Saves the comparison report to `generated-raports/key-sync-report.json`.

## ğŸ” How It Works

The script compares two files:

1. **`generated-raports/locales/en/translation.json`**

   - Generated by i18next-parser
   - Contains keys found in your React components
   - Keys from `useTranslations("key")`, `t("key")`, etc.

2. **`messages/pl.ts`**
   - Your Polish translation file
   - Contains actual Polish text for each key
   - Used by next-intl at runtime

## ğŸ“Š Understanding the Output

```
ğŸ” Translation Key Synchronization Report
==================================================
ğŸ“Š Statistics:
   Keys in translation.json: 98    â† Keys found in your code
   Keys in messages/pl.ts:   51    â† Keys with Polish translations
   Synchronized keys:        22    â† Keys that exist in both files
   Sync percentage:          22%   â† How synchronized you are
```

### Missing in Polish translations

Keys that exist in your code but don't have Polish translations yet.
**Action:** Add these keys to `messages/pl.ts` with Polish text.

### Missing in translation.json

Keys that exist in `messages/pl.ts` but aren't found in your code.
**Action:** Either use these keys in components or remove them if unused.

## ğŸ› ï¸ Workflow

1. **Write React components** using translation keys:

   ```tsx
   const t = useTranslations("auth");
   return <h1>{t("title")}</h1>;
   ```

2. **Extract keys** from code:

   ```bash
   npm run i18n:extract
   ```

3. **Check synchronization**:

   ```bash
   npm run i18n:compare
   ```

4. **Add missing Polish translations** to `messages/pl.ts`:

   ```typescript
   export default {
     auth: {
       title: "Zaloguj siÄ™", // â† Add this
       // ...
     },
   };
   ```

5. **Repeat** until 100% synchronized.

## ğŸ¯ Best Practices

### Key Naming Convention

Use descriptive, hierarchical keys:

```
âœ… Good:
- auth.login.title
- form.email.placeholder
- validation.required

âŒ Avoid:
- title
- placeholder
- error
```

### Organizing Keys

Group related keys together:

```typescript
export default {
  auth: {
    login: {
      title: "Zaloguj siÄ™",
      subtitle: "Wpisz swoje dane",
    },
    register: {
      title: "Zarejestruj siÄ™",
      subtitle: "UtwÃ³rz nowe konto",
    },
  },
  validation: {
    required: "To pole jest wymagane",
    email: "WprowadÅº poprawny adres email",
  },
};
```

### Using Keys in Components

```tsx
// For single namespace
const t = useTranslations("auth.login");
return <h1>{t("title")}</h1>; // Uses auth.login.title

// For multiple namespaces
const authT = useTranslations("auth");
const validationT = useTranslations("validation");

return (
  <form>
    <h1>{authT("login.title")}</h1>
    <input placeholder={authT("login.email.placeholder")} />
    {error && <span>{validationT("required")}</span>}
  </form>
);
```

## ğŸ› Troubleshooting

### "File not found" errors

- Make sure you've run `npm run i18n:extract` first
- Check that `messages/pl.ts` exists and has a default export

### Keys not detected

- Ensure you're using `useTranslations("key")` or `t("key")` syntax
- Dynamic keys (constructed at runtime) won't be detected
- Check i18next-parser.config.js configuration

### Parser errors

- The script tries to parse your TypeScript file
- Complex expressions in messages/pl.ts might not be handled
- Consider simplifying the structure if you get parse errors

## ğŸ”§ Configuration

Edit `i18next-parser.config.js` to customize key extraction:

```javascript
module.exports = {
  input: ["src/**/*.{js,jsx,ts,tsx}"],
  output: "generated-raports/locales/$LOCALE/$NAMESPACE.json",
  options: {
    func: {
      list: ["t", "useTranslations.t"], // Functions that indicate translations
    },
  },
};
```

## ğŸ“ˆ Advanced Usage

### Generate JSON Report

```bash
npm run i18n:compare:save
# Creates: generated-raports/key-sync-report.json
```

### View Full Lists

```bash
npm run i18n:compare:full
# Shows all missing keys, not just first 15
```

### Integration with CI/CD

Add to your build process:

```bash
# Fail build if translation keys are not synchronized
npm run i18n:compare || exit 1
```
